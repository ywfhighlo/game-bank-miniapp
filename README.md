# 动乐帮手（健康习惯培养助手）

## 项目概述
本微信小程序是一款健康生活习惯培养工具，专注于帮助家长/监护人记录孩子的运动情况，并辅助管理线下游戏时间分配。通过科学的运动记录与时间管理，引导用户（特别是青少年）建立"先运动，后娱乐"的健康生活理念。

**重要说明：** 本小程序仅作为线下活动记录工具，不提供任何游戏功能。所有游戏活动均发生在线下真实环境中（如孩子使用游戏机、平板等设备的时间），小程序仅协助家长记录和管理这些线下活动时间。

**核心功能：**
- 用户信息管理（包括家长/监护人与被监护人）
- 运动时间记录与帮手验证（通过帮手验证码确保记录真实性）
- 线下游戏时间建议计算（根据验证通过的运动记录提供参考值）
- 健康习惯培养提醒（如每30分钟休息提示）
- 运动与休闲活动数据统计展示

---

## 功能模块

### 1. 用户管理
- **用户账号：**
  - 注册/登录：用户在注册时需填写基本信息和一个帮手的手机号码。帮手角色（通常是家长/监护人）负责验证运动记录的真实性。
  - 登录成功后，云函数返回 token（以及 userId），前端存储于全局变量中以便后续调用。

### 2. 运动记录与帮手验证
- **记录流程：**
  1. 用户提交运动时长后，通过云函数生成运动记录，同时生成6位验证码发送至帮手手机。
  2. 帮手收到验证码后，需确认用户实际完成了声明的运动量，然后提供验证码给用户。
  3. 用户输入验证码后，系统验证通过则记录生效，确保运动记录的真实性和准确性。
- **数据标记：**
  - 运动记录在云数据库中存储，并带有验证状态（如 `is_verified`）。

### 3. 线下活动时间管理
- 根据帮手验证通过的运动时长自动计算建议的线下游戏/娱乐时间，提供计时与休息提醒等功能。
- 小程序仅提供建议值和计时工具，实际执行和监督由帮手/监护人在线下完成。

### 4. 通知与提醒
- 运动和休闲活动时间提醒均通过前端提示或调用云函数实现消息处理。
- 帮手可接收相关通知，帮助监督整个过程。

### 5. 数据展示与奖励
- 展示基础运动时长及对应的线下活动时间统计数据。
- 展示帮手验证历史，体现监护关系的有效性。
- MVP版本暂不引入复杂奖励机制（如连续运动奖励），后续版本可逐步增加。

---

## 用户流程

### 用户流程
1. 注册/登录：在注册时录入基本信息及帮手手机号码，明确监护关系。
2. 运动记录录入与验证：
   - 用户完成运动后提交运动时长记录
   - 系统发送短信验证码至帮手手机
   - 帮手确认运动情况，并提供验证码给用户
   - 用户输入正确验证码后记录才能生效
3. 查看建议的线下活动时间，帮手根据建议在线下监督孩子的游戏/娱乐活动。

---

## 技术需求

### 前端
- **微信小程序原生开发：**  
  使用 WXML、WXSS 和 JavaScript 编写页面逻辑与 UI。
- **云函数调用：**  
  通过 `wx.cloud.callFunction` 接口与云函数后端进行交互。

### 后端（云开发）
- **云函数（Cloud Functions）：**  
  利用微信小程序云开发提供的云函数实现注册、登录、运动记录提交、验证码验证等业务逻辑。
- **云数据库（Cloud Database）：**  
  存储用户信息、运动记录等数据。使用微信云数据库简化数据管理和存储操作。
- **短信验证系统：**  
  云函数中实现短信验证码发送逻辑，将验证码发送至帮手手机，确保运动记录的真实性。
- **部署与运维：**  
  云开发平台统一管理，无需额外搭建或维护独立服务器，也不存在合法域名等复杂配置问题。

### 开发计划
- 总开发周期：4-6周（实现云函数、云数据库的基本逻辑及前端调用）
- 后续迭代：根据用户反馈扩展奖励机制、数据统计及更多高级功能

---

## 总结
"动乐帮手"是一款健康生活习惯培养工具，通过帮手监督验证机制，确保用户运动记录的真实性，并提供线下活动时间管理建议，帮助引导孩子形成良好的生活习惯。项目基于微信小程序云开发实现，利用云函数和云数据库替代传统后端部署，提高开发效率，并简化运维工作。所有核心业务逻辑均在云开发环境中完成，前端直接调用云函数接口进行数据交互，从而确保整个应用的高效、稳定运行。