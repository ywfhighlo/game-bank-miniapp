# 动乐时光（MVP版）

## 项目概述
本微信小程序旨在通过鼓励用户运动来兑换游戏时间，帮助用户培养健康的生活习惯。核心功能包括用户注册/登录、提交运动记录、验证码验证以及自动兑换游戏时间。所有后端逻辑均采用微信小程序云开发实现，无需额外部署独立服务器。

**核心功能：**
- 用户注册/登录（引入帮手角色，需录入帮手手机号码）
- 手动记录运动时间（录入后需短信验证码验证）
- 自动根据运动时长兑换游戏时间
- 基本的计时和每30分钟休息提醒

---

## 功能模块

### 1. 用户管理
- **用户账号：**
  - 注册/登录：用户在注册时需填写基本信息和一个帮手的手机号码。利用云函数实现用户信息的存储和验证。
  - 登录成功后，云函数返回 token（以及 userId），前端存储于全局变量中以便后续调用。

### 2. 运动记录
- **记录流程：**
  1. 用户提交运动时长后，通过云函数生成运动记录，同时生成6位验证码模拟短信发送至帮手手机。
  2. 用户通过输入验证码调用云函数进行记录验证，验证成功后更新记录状态。
- **数据标记：**
  - 运动记录在云数据库中存储，并带有验证状态（如 `is_verified`）。

### 3. 游戏时间管理
- 根据验证通过的运动时长自动计算可兑换的游戏时间，提供计时与休息提醒等功能。

### 4. 通知与提醒
- 运动和游戏时间提醒均通过前端提示或调用云函数实现消息处理。

### 5. 数据展示与奖励
- 仅显示基础运动时长及兑换的游戏时间统计数据。
- MVP版本暂不引入复杂奖励机制（如连续运动奖励），后续版本可逐步增加。

---

## 用户流程

### 用户流程
1. 注册/登录：在注册时录入基本信息及帮手手机号码，对象可为儿童或成人。
2. 运动记录录入：提交运动时长记录后，系统发送短信验证码至帮手，用户需输入正确验证码后记录生效。
3. 自动兑换游戏时间，并在开启游戏时使用计时与休息提醒功能。

---

## 技术需求

### 前端
- **微信小程序原生开发：**  
  使用 WXML、WXSS 和 JavaScript 编写页面逻辑与 UI。
- **云函数调用：**  
  通过 `wx.cloud.callFunction` 接口与云函数后端进行交互。

### 后端（云开发）
- **云函数（Cloud Functions）：**  
  利用微信小程序云开发提供的云函数实现注册、登录、运动记录提交、验证码验证等业务逻辑。
- **云数据库（Cloud Database）：**  
  存储用户信息、运动记录等数据。使用微信云数据库简化数据管理和存储操作。
- **短信验证模拟：**  
  云函数中模拟短信验证码发送逻辑，未来可集成第三方短信服务接口。
- **部署与运维：**  
  云开发平台统一管理，无需额外搭建或维护独立服务器，也不存在合法域名等复杂配置问题。

### 开发计划
- 总开发周期：4-6周（实现云函数、云数据库的基本逻辑及前端调用）
- 后续迭代：根据用户反馈扩展奖励机制、数据统计及更多高级功能

---

## 总结
本项目基于微信小程序云开发实现，利用云函数和云数据库替代传统后端部署，提高开发效率，并简化运维工作。所有核心业务逻辑均在云开发环境中完成，前端直接调用云函数接口进行数据交互，从而确保整个应用的高效、稳定运行。